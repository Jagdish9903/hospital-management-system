<div class="dashboard-container">
  <!-- Header -->
  <div class="dashboard-header">
    <div class="header-content">
      <h1 class="dashboard-title">Doctor Dashboard</h1>
      <p class="dashboard-subtitle">Welcome back, Dr. {{ currentUser?.name }}! Here's your schedule and patient information.</p>
    </div>
    <button class="refresh-btn" (click)="refreshData()" [disabled]="isLoading">
      <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
        <polyline points="23,4 23,10 17,10"/>
        <polyline points="1,20 1,14 7,14"/>
        <path d="M20.49 9A9 9 0 0 0 5.64 5.64L1 10m22 4l-4.64 4.36A9 9 0 0 1 3.51 15"/>
      </svg>
      <span>Refresh</span>
    </button>
  </div>

  <!-- Loading State -->
  <div class="loading-container" *ngIf="isLoading">
    <div class="loading-spinner"></div>
    <p>Loading dashboard data...</p>
  </div>

  <!-- Dashboard Content -->
  <div class="dashboard-content" *ngIf="!isLoading">
    <!-- Stats Cards -->
    <div class="stats-grid">
      <div class="stat-card" *ngFor="let card of statCards" [class]="'stat-card--' + card.color">
        <div class="stat-card__icon">
          <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
            <ng-container [ngSwitch]="card.icon">
              <!-- Calendar Icon -->
              <g *ngSwitchCase="'calendar'">
                <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
                <line x1="16" y1="2" x2="16" y2="6"/>
                <line x1="8" y1="2" x2="8" y2="6"/>
                <line x1="3" y1="10" x2="21" y2="10"/>
              </g>
              <!-- Users Icon -->
              <g *ngSwitchCase="'users'">
                <path d="M17 21v-2a4 4 0 0 0-4-4H5a4 4 0 0 0-4 4v2"/>
                <circle cx="9" cy="7" r="4"/>
                <path d="M23 21v-2a4 4 0 0 0-3-3.87"/>
                <path d="M16 3.13a4 4 0 0 1 0 7.75"/>
              </g>
              <!-- Clock Icon -->
              <g *ngSwitchCase="'clock'">
                <circle cx="12" cy="12" r="10"/>
                <polyline points="12,6 12,12 16,14"/>
              </g>
              <!-- Check Circle Icon -->
              <g *ngSwitchCase="'check-circle'">
                <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
                <polyline points="22,4 12,14.01 9,11.01"/>
              </g>
            </ng-container>
          </svg>
        </div>
        <div class="stat-card__content">
          <h3 class="stat-card__title">{{ card.title }}</h3>
          <div class="stat-card__value">{{ card.value | number }}</div>
          <div class="stat-card__change" *ngIf="card.change" [class]="'stat-card__change--' + card.changeType">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <polyline *ngIf="card.changeType === 'increase'" points="23,6 13,17 8,12"/>
              <polyline *ngIf="card.changeType === 'decrease'" points="1,18 11,7 16,12"/>
            </svg>
            <span>{{ Math.abs(card.change) }}%</span>
          </div>
        </div>
      </div>
    </div>

    <!-- Charts and Activities Section -->
    <div class="dashboard-main">
      <!-- Today's Appointments -->
      <div class="activities-card">
        <div class="card-header">
          <h3 class="card-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
              <line x1="16" y1="2" x2="16" y2="6"/>
              <line x1="8" y1="2" x2="8" y2="6"/>
              <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
            Today's Appointments
          </h3>
          <button class="view-all-btn" (click)="navigateToAppointments()">View All</button>
        </div>
        <div class="activities-list">
          <div class="activity-item" *ngFor="let appointment of todaysAppointments">
            <div class="activity-icon">
              <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
                <circle cx="12" cy="12" r="3"/>
                <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"/>
              </svg>
            </div>
            <div class="activity-content">
              <p class="activity-description">{{ appointment.patientName }} - {{ appointment.time }}</p>
              <div class="activity-meta">
                <span class="activity-user">{{ appointment.type }}</span>
                <span class="activity-time">{{ appointment.status }}</span>
              </div>
            </div>
          </div>
          <div class="no-activities" *ngIf="todaysAppointments.length === 0">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <line x1="12" y1="8" x2="12" y2="12"/>
              <line x1="12" y1="16" x2="12.01" y2="16"/>
            </svg>
            <p>No appointments scheduled for today</p>
          </div>
        </div>
      </div>

      <!-- Quick Actions -->
      <div class="quick-actions-card">
        <div class="card-header">
          <h3 class="card-title">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="3"/>
              <path d="M12 1v6m0 6v6m11-7h-6m-6 0H1"/>
            </svg>
            Quick Actions
          </h3>
        </div>
        <div class="quick-actions-grid">
          <button class="quick-action-btn" (click)="navigateToAppointments()">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <rect x="3" y="4" width="18" height="18" rx="2" ry="2"/>
              <line x1="16" y1="2" x2="16" y2="6"/>
              <line x1="8" y1="2" x2="8" y2="6"/>
              <line x1="3" y1="10" x2="21" y2="10"/>
            </svg>
            <span>View Appointments</span>
          </button>
          <button class="quick-action-btn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M14 2H6a2 2 0 0 0-2 2v16a2 2 0 0 0 2 2h12a2 2 0 0 0 2-2V8z"/>
              <polyline points="14,2 14,8 20,8"/>
              <line x1="16" y1="13" x2="8" y2="13"/>
              <line x1="16" y1="17" x2="8" y2="17"/>
              <polyline points="10,9 9,9 8,9"/>
            </svg>
            <span>Patient Records</span>
          </button>
          <button class="quick-action-btn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <circle cx="12" cy="12" r="10"/>
              <polyline points="12,6 12,12 16,14"/>
            </svg>
            <span>Schedule</span>
          </button>
          <button class="quick-action-btn">
            <svg viewBox="0 0 24 24" fill="none" stroke="currentColor" stroke-width="2">
              <path d="M22 11.08V12a10 10 0 1 1-5.93-9.14"/>
              <polyline points="22,4 12,14.01 9,11.01"/>
            </svg>
            <span>Reports</span>
          </button>
        </div>
      </div>
    </div>
  </div>
</div>
